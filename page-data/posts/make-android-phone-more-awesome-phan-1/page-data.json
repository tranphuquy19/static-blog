{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/make-android-phone-more-awesome-phan-1","result":{"data":{"markdownRemark":{"id":"8c720429-e205-567f-ab1f-6a0863796cd7","html":"<p><img src=\"/media/mapma-4.jpg\" alt=\"Android\"></p>\n<h2 id=\"1-chuẩn-bị\" style=\"position:relative;\"><a href=\"#1-chu%E1%BA%A9n-b%E1%BB%8B\" aria-label=\"1 chuẩn bị permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Chuẩn bị</h2>\n<ol>\n<li>Android phone (đã rooted hoặc chưa cũng được)</li>\n<li>Laptop/PC </li>\n<li>Cả 2 thiết bị trên cùng kết nối chung mạng wifi</li>\n<li>Và một chút kiến thức về Linux, git</li>\n</ol>\n<p>Note: Trong bài viết mình deploy web server chạy NodeJS, đối với nền tảng các bạn chỉ cần setup trên android tới bước 5 là đủ</p>\n<h2 id=\"2-cài-ứng-dụng-termux-trên-android\" style=\"position:relative;\"><a href=\"#2-c%C3%A0i-%E1%BB%A9ng-d%E1%BB%A5ng-termux-tr%C3%AAn-android\" aria-label=\"2 cài ứng dụng termux trên android permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Cài ứng dụng Termux trên Android</h2>\n<p><a href=\"https://play.google.com/store/apps/details?id=com.termux&#x26;hl=vi\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">link Termux</a></p>\n<p>Giới thiệu sơ qua về Termux app, thì đây là ứng dụng tương tự như Terminal trên linux, nhưng cái hay là chúng hỗ trợ môi trường Linux thông qua trình quản lí packages đi kèm. Các bạn có thể tham khảo về termux trên Github (open-source)</p>\n<p>Xem thêm:</p>\n<ul>\n<li><a href=\"https://github.com/termux/termux-packages/tree/master/packages\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Các Packages Termux hỗ trợ</a></li>\n<li><a href=\"https://wiki.termux.com/wiki/Differences_from_Linux\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Termux khác với các distro Linux khác như thế nào</a></li>\n</ul>\n<p>Trong bài này mình thực hiện test trên con xiaomi redmi note 4 (mido / rooted), chưa root vẫn được nhé, nhưng cực cái là các bạn ko duyệt file trên đt được. Còn source code thì được dev trên laptop chạy ubuntu và deploy thông qua github. Let’s go</p>\n<p><strong>Note</strong>: Termux hiện tại chỉ hoạt động với android 5 trở lên! Từ ngày 1.1.2020 sẽ ko hỗ trợ cho android 5 và 6, các phiên bản cũ hơn của Termux vẫn làm việc tốt, <a href=\"https://archive.org/download/termux-repositories-legacy\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">tải tại đây</a></p>\n<h2 id=\"3-setup-authen-cho-ssh\" style=\"position:relative;\"><a href=\"#3-setup-authen-cho-ssh\" aria-label=\"3 setup authen cho ssh permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Setup Authen cho SSH</h2>\n<h3 id=\"install-open-ssh\" style=\"position:relative;\"><a href=\"#install-open-ssh\" aria-label=\"install open ssh permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install Open SSH</h3>\n<p>Đầu tiên chúng ta phải setup ssh cho nó cái đã. Chạy lệnh sau </p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">apt update &amp;&amp; apt upgrade -y \napt install openssh</code>\n        </deckgo-highlight-code>\n<h3 id=\"setup-ssh\" style=\"position:relative;\"><a href=\"#setup-ssh\" aria-label=\"setup ssh permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup SSH</h3>\n<p>Lấy username hệ thống. Có 3 cách là</p>\n<ol>\n<li><code class=\"language-text\">$ pwd</code> \t\tprint working directory</li>\n<li><code class=\"language-text\">$ echo $HOME</code> \tIn biến HOME ra </li>\n<li><code class=\"language-text\">$ whoami</code> \t\tWHO AM I?</li>\n</ol>\n<p>=> username của mình là <code class=\"language-text\">u0_a173</code></p>\n<ol>\n<li>Set password cho account. Như linux thôi </li>\n</ol>\n<p><code class=\"language-text\">$ passwd &lt;username&gt;</code>\tVí dụ: <code class=\"language-text\">$ passwd u0_a173</code> Nhập pass 2 lần nhá.\n<code class=\"language-text\">$ sshd</code> để start ssh server </p>\n<h2 id=\"4-connect-ssh-đến-android-phone\" style=\"position:relative;\"><a href=\"#4-connect-ssh-%C4%91%E1%BA%BFn-android-phone\" aria-label=\"4 connect ssh đến android phone permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Connect SSH đến Android phone</h2>\n<p>Test thử xem sao? Mở terminal trên Ubuntu lên, trên windows có thể sử dụng powershell nha!</p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ ssh -p 8022 u0_a173@192.168.1.102</code>\n        </deckgo-highlight-code>\n<p>Giải thích chút xíu về command trên, <code class=\"language-text\">-p 8022</code> là port ssh trên Android phone, nghe hơi sai sai, thông thường thì ssh start ở port 21/22, nhưng trên Android phone thì Termux map nó ở port 8022, <code class=\"language-text\">u0_a173</code> là username lúc nãy, <code class=\"language-text\">192.168.1.102</code> là ip trong mạng LAN (wifi), muốn biết thì vào settings >> WIFI bấm vào wifi đang connecting thì lấy được, hoặc vào trang setup của Router wifi >> DHCP Lease Information là ra.</p>\n<p>Từ lúc này mình setup ko cần động đến đt nữa, mọi thao tác sẽ qua ssh trên Ubuntu terminal cho tiện, sau bài này mình sẽ hướng dẫn connect đến android phone thông qua Internet/3G.4G đều được, public server web…</p>\n<h2 id=\"5-setup-môi-trường-trên-android-phone\" style=\"position:relative;\"><a href=\"#5-setup-m%C3%B4i-tr%C6%B0%E1%BB%9Dng-tr%C3%AAn-android-phone\" aria-label=\"5 setup môi trường trên android phone permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Setup môi trường trên Android phone</h2>\n<p>Update lần nữa Android phone</p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ apt update &amp;&amp; apt upgrade</code>\n        </deckgo-highlight-code>\n<p>Một số hướng dẫn thao tác với Termux</p>\n<p>Working with packages:</p>\n<ul>\n<li>Search packages:   pkg search [query]</li>\n<li>Install a package: pkg install [packages]</li>\n<li>Upgrade packages:  pkg upgrade</li>\n</ul>\n<p>Trong bài này mình sẽ setup node js với express framework </p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ apt install nodejs</code>\n        </deckgo-highlight-code>\n<p>Kiểm tra version hiện tại của Node và NPM</p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ node -v &amp;&amp; npm -v</code>\n        </deckgo-highlight-code>\n<p>Tạo 1 trang test với express trên laptop nha, sau đó deploy qua github.</p>\n<p>Note: trong bài viết này mình coi như là bạn đã thông thạo Git &#x26; Github mình ko giải thích gì thêm!</p>\n<p>Thao tác tại PC ko phải với Android phone qua ssh</p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ sudo apt-get update &amp;&amp; sudo apt-get upgrade -y\n$ sudo apt-get install nodejs\n$ npm install express\n$ npm install express-generator\n$ express --ejs MAPMA\n$ cd MAPMA\n$ git init\n$ git add .\n$ git commit -m &quot;first commit&quot;\n$ git remote add origin https://github.com/&lt;username&gt;/&lt;your-repo&gt;.git\n$ git push -u origin master</code>\n        </deckgo-highlight-code>\n<p>Các commands bên trên là toàn bộ thiết lập mới cho Ubuntu dành cho bạn nào chưa biết </p>\n<p>Setup git cho Android phone</p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ apt install git</code>\n        </deckgo-highlight-code>\n<h2 id=\"5-deploy\" style=\"position:relative;\"><a href=\"#5-deploy\" aria-label=\"5 deploy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Deploy</h2>\n<p>Clone repo phía trên từ github về</p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ git clone https://github.com/&lt;username&gt;/&lt;your-repo&gt;.git\n$ cd &lt;your-repo&gt;\n$ npm install \n$ npm start</code>\n        </deckgo-highlight-code>\n<p>Hoặc bạn có thể clone Project demo của mình</p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ git clone https://github.com/tranphuquy19/MAPMA.git\n$ cd MAPMA\n$ npm install \n$ npm start</code>\n        </deckgo-highlight-code>\n<p>Note: Các bạn có thể setup Express chạy ngầm (deamon) thông qua ForeverJS hoặc PM2. Cú pháp</p>\n<ol>\n<li>Forever JS</li>\n</ol>\n<p>Install</p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ npm install -g forever</code>\n        </deckgo-highlight-code>\n<p>Start </p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ forever start ./bin/www</code>\n        </deckgo-highlight-code>\n<p>Stop</p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ forever stopall</code>\n        </deckgo-highlight-code>\n<ol start=\"2\">\n<li>PM2 </li>\n</ol>\n<p>Install</p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ npm install -g pm2 </code>\n        </deckgo-highlight-code>\n<p>Start</p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ pm2 start ./bin/www</code>\n        </deckgo-highlight-code>\n<p>Stop</p>\n<deckgo-highlight-code language=\"bash\"  line-numbers=\"true\" editable=\"true\" >\n          <code slot=\"code\">$ pm2 stop all</code>\n        </deckgo-highlight-code>\n<h2 id=\"7-enjoy\" style=\"position:relative;\"><a href=\"#7-enjoy\" aria-label=\"7 enjoy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. Enjoy!!!</h2>\n<p><img src=\"/media/mapma-1.png\" alt=\"demo\" title=\"Trang demo trên điện thoại sẽ như thế này\"></p>\n<p><img src=\"/media/mapma-2.png\" alt=\"demo\" title=\"Optional Title\"></p>\n<p><img src=\"/media/mapma-3.png\" alt=\"demo\" title=\"Optional Title\"></p>","fields":{"slug":"/posts/make-android-phone-more-awesome-phan-1","tagSlugs":["/tag/android/","/tag/termux/","/tag/nodejs/","/tag/web-server/","/tag/t-i-l/"]},"frontmatter":{"date":"2020-05-10T03:34:21.556Z","description":"Thủ thuật cấu hình VPS cho smartphone Android","tags":["android","termux","nodejs","web server","t.i.l"],"title":"Biến android phone thành Web-server","socialImage":"/media/mapma-4.jpg"}}},"pageContext":{"slug":"/posts/make-android-phone-more-awesome-phan-1"}},"staticQueryHashes":["251939775","3032201271","401334301"]}